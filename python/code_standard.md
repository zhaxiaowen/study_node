# Python

## 如何为变量起名

1. 命名
   * **类**:大驼峰,单词首字母大写:`class MyClass()`
   * **函数**:函数名一律小写,多个单词用下划线隔开:`def my_func`
   * **变量**:变量名小写,多个单词用下划线分开
   * **常量**:使用全大写

2. 变量名要有描述性,不能太宽泛
   * BAD: `day`,`host`,`temp`
   * GOOD: `day_of_week`,`hosts_to_reboot`,`expired_cards`
3. 变量名最好让人能猜出类型
   * `is_superuser`:『是否超级用户』,只有两种值:『是』/『不是』
   * `has_error`:『有没有错』,只有两种值:『有』/『没有』
   * 『什么样的名字会被当成int/float类型』
     * 释义为数字的单词:`port(端口)`,`age(年龄)`
     * 使用_id结尾的单词:`user_id`,`host_id`
     * 使用length/count开头或结尾的单词:`length_of_username`,`max_length`
4. 适当使用『匈牙利命名法』
   * 就是把变量的类型缩写,放到变量名的最前面
5. 变量名尽量短,但是绝对不要太短
   * 好的变量名长度应该控制在**两到三个单词**
   * 避免使用只有一两个字母的短名字
6. 其他注意事项
   * 同一段代码不要使用过于相似的变量名,比如`user1`,`user2`,`user3`这种
   * 不要使用带否定含义的变量名
7. 变量定义尽量靠近使用
8. 定义临时变量提升可读性

## 编写条件分支代码的技巧

* 最佳实践
  * 避免多层分支嵌套
  * 封装过于复杂的逻辑判断: 条件分支表达式出现太多`not/and/or`,可以把分支逻辑封装成函数或者方法,来达到简化代码的目的
  * 留意不同分支下的重复代码
  * 使用`try/while/for中else分支`:`try/else`只有当*try*的语句正常执行没有抛出异常,便执行*else*分支

## 使用数字与字符串的技巧

* 最佳实践
  * 少写数字字面量:使用enum枚举类型改善代码
  * 别再裸字符串处理上走太远:比如sql拼接字符串,容易产生bug
  * 不比预计算字面量表达式:可以直接写成`12*30*24`
* 实用技巧
  * 操作结构化字符串时,使用对象化模块化比直接处理更有优势
* 常见误区
  * 字符串拼接并不慢

## python的数据结构使用

* 避免频繁扩充列表/创建新列表
  * 更多的使用`yield`,返回生成器对象
  * 尽量使用生成器表达式替代列表推导式表达式
    * 生成器表达式:`(i for i in range(100))`
    * 列表推导表达式:`[i for i in range(100)]`
  * 尽量使用模块提供的懒惰对象
    * 使用`re.finditer`替代`re.findall`
    * 直接使用可迭代的文件对象:`for lin in fp`,而不是`for line in fp.readlines()`
* 在列表头部操作多的场景使用deque模块
* 使用集合/字典判断成员是否存在
  * 因为`itme in [...]`操作时间复杂度是o(n),而`item in {...}`的时间复杂度是o(1),是因为字典和集合都是基于哈希表数据结构实现的
* 面向容器接口编程:操作的数据类型可能从list变为dict或者iterable,所以将参数类型改为可迭代的抽象类
* 别在循环体内修改被迭代对象

## 函数返回结果的技巧

* 单个函数不要返回多种类型
* 抛出异常,而不是返回结果与错误

## 异常处理好习惯

* 只做最精确的异常捕获
* 异常处理不应该喧宾夺主
  * 太多异常需要捕获时,可以通过定义上下文管理器
